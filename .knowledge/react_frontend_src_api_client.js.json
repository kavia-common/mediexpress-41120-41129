{"is_source_file": true, "format": "JavaScript", "description": "This file provides a minimal API client for the MediExpress frontend, which includes functions for making HTTP requests, managing product data, user authentication, order processing, and health checks. It contains mock data and fallback mechanisms to maintain UI functionality even when backend endpoints are unavailable.", "external_files": ["../config/env"], "external_methods": ["getRuntimeConfig"], "published": ["apiRequest", "fetchProducts", "fetchProductById", "registerUser", "loginUser", "createOrder", "fetchOrder", "fetchHealthcheck"], "classes": [], "methods": [{"name": "sleep(ms)", "description": "Returns a promise that resolves after a given number of milliseconds, used to throttle or simulate delays.", "scope": "", "scopeKind": ""}, {"name": "safeParseJson(resp)", "description": "Safely parses JSON from a fetch response, returning null or raw text if parsing fails.", "scope": "", "scopeKind": ""}, {"name": "buildUrl(path)", "description": "Constructs a proper URL based on the base URL from runtime config and the provided path.", "scope": "", "scopeKind": ""}, {"name": "apiRequest(path, { method = \"GET\", token, body, headers } = {})", "description": "Performs an API fetch request with error handling, adding authorization headers when needed.", "scope": "", "scopeKind": ""}, {"name": "normalizeProduct(p)", "description": "Normalizes product data from various source formats into a standardized product object.", "scope": "", "scopeKind": ""}, {"name": "fetchProducts({ q, category, sort } = {})", "description": "Fetches a list of products with optional filters and sorting, with fallback to mock data.", "scope": "", "scopeKind": ""}, {"name": "fetchProductById(id)", "description": "Fetches a single product by ID, with fallback to mock data if not found.", "scope": "", "scopeKind": ""}, {"name": "registerUser({ name, email, password })", "description": "Registers a new user, attempting multiple backend endpoints, with fallback to mock token.", "scope": "", "scopeKind": ""}, {"name": "loginUser({ email, password })", "description": "Logs in a user, trying multiple endpoints, with fallback token.", "scope": "", "scopeKind": ""}, {"name": "createOrder({ token, cartItems, address, payment })", "description": "Creates a new order for the current cart, with fallback to mock order data.", "scope": "", "scopeKind": ""}, {"name": "fetchOrder({ token, orderId })", "description": "Fetches order status and details by order ID, with mock fallback data.", "scope": "", "scopeKind": ""}, {"name": "fetchHealthcheck(path)", "description": "Performs a health check request to a specified endpoint.", "scope": "", "scopeKind": ""}], "calls": ["getRuntimeConfig()", "fetch()", "setTimeout()", "JSON.parse()", "JSON.stringify()", "new Error()"], "search-terms": ["api client", "product fetch", "order creation", "user registration", "healthcheck", "fallback mock data", "React API", "fetch wrapper"], "state": 2, "file_id": 14, "knowledge_revision": 53, "git_revision": "a2599780176e90ab08a80ff1fc45db7fab095bc6", "ctags": [{"_type": "tag", "name": "Accept", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^    Accept: \"application\\/json\",$/", "language": "JavaScript", "kind": "property", "scope": "apiRequest.mergedHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "MOCK_PRODUCTS", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^const MOCK_PRODUCTS = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "address", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^    address,$/", "language": "JavaScript", "kind": "field", "scope": "createOrder.payload", "scopeKind": "class"}, {"_type": "tag", "name": "apiRequest", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function apiRequest(path, { method = \"GET\", token, body, headers } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = \"GET\", token, body, headers } = {})"}, {"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^function buildUrl(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function createOrder({ token, cartItems, address, payment }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ token, cartItems, address, payment })"}, {"_type": "tag", "name": "fetchHealthcheck", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function fetchHealthcheck(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}, {"_type": "tag", "name": "fetchOrder", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function fetchOrder({ token, orderId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ token, orderId })"}, {"_type": "tag", "name": "fetchProductById", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function fetchProductById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "fetchProducts", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function fetchProducts({ q, category, sort } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ q, category, sort } = {})"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^    items: cartItems.map((i) => ({$/", "language": "JavaScript", "kind": "property", "scope": "createOrder.payload", "scopeKind": "class"}, {"_type": "tag", "name": "loginUser", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function loginUser({ email, password }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ email, password })"}, {"_type": "tag", "name": "mergedHeaders", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^  const mergedHeaders = {$/", "language": "JavaScript", "kind": "class", "scope": "apiRequest", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeProduct", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^function normalizeProduct(p) {$/", "language": "JavaScript", "kind": "function", "signature": "(p)"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "createOrder", "scopeKind": "class"}, {"_type": "tag", "name": "registerUser", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^export async function registerUser({ name, email, password }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ name, email, password })"}, {"_type": "tag", "name": "safeParseJson", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^async function safeParseJson(resp) {$/", "language": "JavaScript", "kind": "function", "signature": "(resp)"}, {"_type": "tag", "name": "sleep", "path": "/home/kavia/workspace/code-generation/mediexpress-41120-41129/react_frontend/src/api/client.js", "pattern": "/^function sleep(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)"}], "hash": "42ca7b9ec18288aa344b1a48b7285e44", "format-version": 4, "code-base-name": "react_frontend", "filename": "react_frontend/src/api/client.js", "fields": [{"name": "Accept: \"application\\/json\",", "scope": "apiRequest.mergedHeaders", "scopeKind": "class", "description": "unavailable"}, {"name": "address,", "scope": "createOrder.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "items: cartItems.map((i) => ({", "scope": "createOrder.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"53": "a2599780176e90ab08a80ff1fc45db7fab095bc6"}]}